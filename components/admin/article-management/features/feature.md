# Article Management: Approve and Edit AI Articles

## User story
- As an admin, I want to review, approve, reject, and edit AI-processed articles so that published content meets quality standards.

## Acceptance criteria
- Admin-only access:
  - Only authenticated admins can access the Article Management UI and perform actions.
- Tabs (backed by `articles.status`):
  - Pending tab shows articles with `status = "pending"`.
  - Approved tab shows `status = "approved"`.
  - Rejected tab shows `status = "rejected"`.
- Review:
  - Pending list shows: title, excerpt and image thumbnail.
  - Detail view shows all editable fields in the edit dialogue.
- Approve:
  - Approve action sets `status = "approved"`. Toast confirmation. Item moves tabs without reload.
- Reject:
  - Reject action sets `status = "rejected"`. Toast confirmation. Item moves tabs without reload.
  - Edit allows updating title, body, category, topics, and (optionally) image.
  - On save: sets `isEdited = true` and preserves `isAutoGenerated = true`.
  - Save is allowed for both pending and approved; status remains unchanged unless admin chooses to set it.
- Bulk actions:
  - Bulk approve/reject from Pending.
- Sorting and filtering:
  - Sort by newest; filter by category (optional).
- States:
  - Loading, empty (per tab), and error states are visible and helpful.
- Auditability (future):
  - Record who approved/rejected/edited (TBD).
- Performance:
  - Pagination or infinite scroll for large lists (TBD threshold).
- Security:
  - All mutations are server-validated as admin-only.

## Flow
- Data:
  - Table: `articles` (fields: `status`, `isAutoGenerated`, `isEdited`, `title`, `body`, `categoryId`, `topics`, `sourceUrls`, `imageGenPrompts`, `_creationTime`).
- Queries:
  - Get by status (uses existing index `by_status`): `articles.listByStatus(status)`.
  - Get article detail: `articles.getArticle(id)`.
- Mutations (admin):
  - `articles.adminUpdateStatus(id, status)`: pending â†’ approved/rejected.
  - `articles.adminEdit(id, { title, body, categoryId, topics, imageStorageId? })`: sets `isEdited = true`.
- Status transitions:
  - AI pipeline writes `status = "pending"`.
  - Admin sets to `approved` or `rejected`.
  - Edits do not auto-change status unless explicitly chosen.

## Open questions
- Should reject capture a reason/note? no
- Do edits to approved content require re-approval? no
- Bulk actions required for v1? yes
- Do we expose edit history/audit trail? no